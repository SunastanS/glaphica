{"_id":"@ruvector/rvf-node","_rev":"8-50c62cde52c959fa3f5c74eabf93ac13","name":"@ruvector/rvf-node","dist-tags":{"latest":"0.1.7"},"versions":{"0.1.0":{"name":"@ruvector/rvf-node","version":"0.1.0","license":"MIT","_id":"@ruvector/rvf-node@0.1.0","maintainers":[{"name":"ruvnet","email":"ruv@ruv.net"}],"dist":{"shasum":"1708a42d7227161a1c33830ca7425edac0e79da5","tarball":"https://registry.npmjs.org/@ruvector/rvf-node/-/rvf-node-0.1.0.tgz","fileCount":2,"integrity":"sha512-eIEqHhJ7ClBNnm2cZiKl4gUygOEo628Cc89l8nkAfWKpZucdeEOsXjjNEmqcl7ty2FhuXeHrcS6Q2dG9JENHxg==","signatures":[{"sig":"MEUCIQCAZ8gdlTQYn8BAKSUbFFiOAWR9DhzLOuKDMeR4P9IHeAIgTs2zpRpIrYFHW0R5veSWZ7K+N0M/2faoFpa4SWHBTxQ=","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":2030},"main":"index.js","napi":{"name":"rvf-node","triples":{"defaults":true,"additional":["aarch64-apple-darwin","aarch64-unknown-linux-gnu"]}},"types":"index.d.ts","gitHead":"ed833918f20ebbd289f9a94a1dc1a5cf63d23155","scripts":{"test":"jest","build":"napi build --platform --release"},"_npmUser":{"name":"ruvnet","email":"ruv@ruv.net"},"_npmVersion":"9.8.1","description":"RuVector Format Node.js native bindings","directories":{},"_nodeVersion":"22.21.1","_hasShrinkwrap":false,"devDependencies":{"@napi-rs/cli":"^2.18.0"},"_npmOperationalInternal":{"tmp":"tmp/rvf-node_0.1.0_1771087054381_0.5411557008607786","host":"s3://npm-registry-packages-npm-production"}},"0.1.1":{"name":"@ruvector/rvf-node","version":"0.1.1","license":"MIT","_id":"@ruvector/rvf-node@0.1.1","maintainers":[{"name":"ruvnet","email":"ruv@ruv.net"}],"dist":{"shasum":"777cdac1732d4f71406116438986ba1c5af439a9","tarball":"https://registry.npmjs.org/@ruvector/rvf-node/-/rvf-node-0.1.1.tgz","fileCount":2,"integrity":"sha512-KbAF6yJc6Zs/hUPhIpOz9pdTty72LOEGTYnSdHmITGxrn6ZrkVJe8kGw4sX9JCVbQ7bpBwMo5AWJaegUwRPajQ==","signatures":[{"sig":"MEQCIFN7oDbK6LXtTSX9zRUKorJi4Y22mY8VYw6MOXtOXp9mAiBdwVs8KiyYnaE0RUHyoz1V9vyQFAT5wAKDxahmMo9rIQ==","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":2054},"main":"index.js","napi":{"name":"rvf-node","triples":{"defaults":true,"additional":["aarch64-apple-darwin","aarch64-unknown-linux-gnu"]}},"types":"index.d.ts","gitHead":"fb6bd64685c6467947977180b77816511f61793e","scripts":{"test":"jest","build":"napi build --platform --release"},"_npmUser":{"name":"ruvnet","email":"ruv@ruv.net"},"_npmVersion":"9.8.1","description":"RuVector Format Node.js native bindings","directories":{},"_nodeVersion":"22.21.1","_hasShrinkwrap":false,"devDependencies":{"@napi-rs/cli":"^2.18.0"},"_npmOperationalInternal":{"tmp":"tmp/rvf-node_0.1.1_1771114165967_0.7707292549432321","host":"s3://npm-registry-packages-npm-production"}},"0.1.2":{"name":"@ruvector/rvf-node","version":"0.1.2","license":"MIT","_id":"@ruvector/rvf-node@0.1.2","maintainers":[{"name":"ruvnet","email":"ruv@ruv.net"}],"dist":{"shasum":"8587407be8b382326c7bdcb86d628211aeb7c5af","tarball":"https://registry.npmjs.org/@ruvector/rvf-node/-/rvf-node-0.1.2.tgz","fileCount":2,"integrity":"sha512-0NpNdwrKFRy8HR5VWNKvmO1sTHgtoGqTVgGPnMXcuSahZny4Y1pywzYaHHvAdLcT0aFQyWwG/Bb7BzdNiH9CbA==","signatures":[{"sig":"MEYCIQDIbb2/OnOeHtWvARGzeUvJGD1eyxr3KXo3uJsHd+fbgwIhAKM+HQue1rJOJSZFZ2GYChY0cUNAavIlwGAN3HuLwWKj","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":2054},"main":"index.js","napi":{"name":"rvf-node","triples":{"defaults":true,"additional":["aarch64-apple-darwin","aarch64-unknown-linux-gnu"]}},"types":"index.d.ts","gitHead":"e9a697a0f474190670f9ef248f1b16be4c09b7eb","scripts":{"test":"jest","build":"napi build --platform --release"},"_npmUser":{"name":"ruvnet","email":"ruv@ruv.net"},"_npmVersion":"9.8.1","description":"RuVector Format Node.js native bindings","directories":{},"_nodeVersion":"22.21.1","_hasShrinkwrap":false,"devDependencies":{"@napi-rs/cli":"^2.18.0"},"_npmOperationalInternal":{"tmp":"tmp/rvf-node_0.1.2_1771137006454_0.42102499422101536","host":"s3://npm-registry-packages-npm-production"}},"0.1.3":{"name":"@ruvector/rvf-node","version":"0.1.3","license":"MIT","_id":"@ruvector/rvf-node@0.1.3","maintainers":[{"name":"ruvnet","email":"ruv@ruv.net"}],"dist":{"shasum":"ba3a01153ea945640d92af76c0cdba53428fc89d","tarball":"https://registry.npmjs.org/@ruvector/rvf-node/-/rvf-node-0.1.3.tgz","fileCount":2,"integrity":"sha512-gQenbbAQ5XVXbB8ylTEl7WNEJY6w1xQw/oRfBkxbTj64RUfz+bEn+oZTiLcwinRKRq2XDEfB/n8fJR67rIXisw==","signatures":[{"sig":"MEQCIBJKjuWBlN/FdR3rgcIwEvcBVkuIB3PYIl/h9eqgLzA9AiAauvS+3bK8U92EXVw4xW+d8Oool0C40up4a7M4a+BMvw==","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":8227},"main":"index.js","napi":{"name":"rvf-node","triples":{"defaults":true,"additional":["aarch64-apple-darwin","aarch64-unknown-linux-gnu"]}},"types":"index.d.ts","gitHead":"9fb3d2c63b19ac6950b931f4adb56834bf96c45d","scripts":{"test":"jest","build":"napi build --platform --release"},"_npmUser":{"name":"ruvnet","email":"ruv@ruv.net"},"_npmVersion":"9.8.1","description":"RuVector Format Node.js native bindings","directories":{},"_nodeVersion":"22.21.1","_hasShrinkwrap":false,"devDependencies":{"@napi-rs/cli":"^2.18.0"},"_npmOperationalInternal":{"tmp":"tmp/rvf-node_0.1.3_1771252443017_0.40562182876101405","host":"s3://npm-registry-packages-npm-production"}},"0.1.4":{"name":"@ruvector/rvf-node","version":"0.1.4","license":"MIT","_id":"@ruvector/rvf-node@0.1.4","maintainers":[{"name":"ruvnet","email":"ruv@ruv.net"}],"homepage":"https://github.com/ruvnet/ruvector#readme","bugs":{"url":"https://github.com/ruvnet/ruvector/issues"},"dist":{"shasum":"abf8c784bb043d6f02ad0a911b75efceb518521f","tarball":"https://registry.npmjs.org/@ruvector/rvf-node/-/rvf-node-0.1.4.tgz","fileCount":5,"integrity":"sha512-aMIGhYYeyHs77y9R+pyBOe+HhAQLoakoUBLT5aDF44bVlYhujGetooX79ehBRR5+I/LL7chcYfAmkU5g1PpKtg==","signatures":[{"sig":"MEUCIQCC4asHm3Rhlp0ADhXBju4SxdFtoZKP7m31WekLAEDlEQIgFSxzf0BCU+EeweE8X5Qir0TyUbEW62qq5FP2mosRYaI=","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":1292819},"main":"index.js","napi":{"targets":["x86_64-unknown-linux-gnu","x86_64-apple-darwin","aarch64-apple-darwin","x86_64-pc-windows-msvc","aarch64-unknown-linux-gnu"],"binaryName":"rvf-node"},"types":"index.d.ts","engines":{"node":">= 16"},"gitHead":"bb78099f0d10379c93fad60ecfd502a252cee75a","scripts":{"build":"napi build --platform --release"},"_npmUser":{"name":"ruvnet","email":"ruv@ruv.net"},"repository":{"url":"git+https://github.com/ruvnet/ruvector.git","type":"git"},"_npmVersion":"9.8.1","description":"RuVector Format Node.js native bindings","directories":{},"_nodeVersion":"22.21.1","publishConfig":{"access":"public","registry":"https://registry.npmjs.org/"},"_hasShrinkwrap":false,"optionalDependencies":{"@ruvector/rvf-node-darwin-x64":"0.1.4","@ruvector/rvf-node-darwin-arm64":"0.1.4","@ruvector/rvf-node-linux-x64-gnu":"0.1.4","@ruvector/rvf-node-win32-x64-msvc":"0.1.4","@ruvector/rvf-node-linux-arm64-gnu":"0.1.4"},"_npmOperationalInternal":{"tmp":"tmp/rvf-node_0.1.4_1771273544395_0.6257530640513171","host":"s3://npm-registry-packages-npm-production"}},"0.1.5":{"name":"@ruvector/rvf-node","version":"0.1.5","license":"MIT","_id":"@ruvector/rvf-node@0.1.5","maintainers":[{"name":"ruvnet","email":"ruv@ruv.net"}],"homepage":"https://github.com/ruvnet/ruvector#readme","bugs":{"url":"https://github.com/ruvnet/ruvector/issues"},"dist":{"shasum":"77436734108b32500006567b4ec1feaff518c426","tarball":"https://registry.npmjs.org/@ruvector/rvf-node/-/rvf-node-0.1.5.tgz","fileCount":8,"integrity":"sha512-BgRcJCakOploPQW/+k50GS/+H9/Jpn/L5OG+akshvE1hc5VP3xc2ilAxNrw/1xTiigbAzWbpXZuO5eb8pqFKIA==","signatures":[{"sig":"MEQCIHi5SSH3Hs1a+20stLmEiPyq+fqpiQqCXGAyrunQ90YmAiBlzweFJgQ/jrb25Zdgf1devJi5kYDe6EVaBVTsUIC47w==","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":8802555},"main":"index.js","napi":{"targets":["x86_64-unknown-linux-gnu","x86_64-apple-darwin","aarch64-apple-darwin","x86_64-pc-windows-msvc","aarch64-unknown-linux-gnu"],"binaryName":"rvf-node"},"types":"index.d.ts","engines":{"node":">= 16"},"gitHead":"941f5cb846e6b9844f7d9cc811462ff982810f3c","scripts":{"build":"napi build --platform --release"},"_npmUser":{"name":"ruvnet","email":"ruv@ruv.net"},"repository":{"url":"git+https://github.com/ruvnet/ruvector.git","type":"git"},"_npmVersion":"9.8.1","description":"RuVector Format Node.js native bindings","directories":{},"_nodeVersion":"22.21.1","publishConfig":{"access":"public","registry":"https://registry.npmjs.org/"},"_hasShrinkwrap":false,"optionalDependencies":{"@ruvector/rvf-node-darwin-x64":"0.1.4","@ruvector/rvf-node-darwin-arm64":"0.1.4","@ruvector/rvf-node-linux-x64-gnu":"0.1.4","@ruvector/rvf-node-win32-x64-msvc":"0.1.4","@ruvector/rvf-node-linux-arm64-gnu":"0.1.4"},"_npmOperationalInternal":{"tmp":"tmp/rvf-node_0.1.5_1771278204205_0.16170022480417567","host":"s3://npm-registry-packages-npm-production"}},"0.1.6":{"name":"@ruvector/rvf-node","version":"0.1.6","license":"MIT","_id":"@ruvector/rvf-node@0.1.6","maintainers":[{"name":"ruvnet","email":"ruv@ruv.net"}],"homepage":"https://github.com/ruvnet/ruvector#readme","bugs":{"url":"https://github.com/ruvnet/ruvector/issues"},"dist":{"shasum":"86dd0894a7a200fe633ee1be925e3375a8878220","tarball":"https://registry.npmjs.org/@ruvector/rvf-node/-/rvf-node-0.1.6.tgz","fileCount":9,"integrity":"sha512-Y/ZLFq8E+cYh1Bo4m/BYryC8S4+pyZJWCzhQmuWLxU3+zg/tzZc/mlMSd5vHXxsp47Dnqjm43GqIezXFbQkP5A==","signatures":[{"sig":"MEQCIEbfFbGmS+Wt2rvVJcxLwbK8GDRoBH9fEr+rm08M0UAIAiBD/VHR5uSVrRjaBwCqPIAjgPTNAuYQV2uCNxYa5WeBQg==","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":5378363},"main":"index.js","napi":{"targets":["x86_64-unknown-linux-gnu","x86_64-apple-darwin","aarch64-apple-darwin","x86_64-pc-windows-msvc","aarch64-unknown-linux-gnu"],"binaryName":"rvf-node"},"types":"index.d.ts","engines":{"node":">= 16"},"gitHead":"eda601dbca1f8510fab187e1bbb9c4b0bee75d8d","scripts":{"build":"napi build --platform --release"},"_npmUser":{"name":"ruvnet","email":"ruv@ruv.net"},"repository":{"url":"git+https://github.com/ruvnet/ruvector.git","type":"git"},"_npmVersion":"9.8.1","description":"RuVector Format Node.js native bindings","directories":{},"_nodeVersion":"22.21.1","publishConfig":{"access":"public","registry":"https://registry.npmjs.org/"},"_hasShrinkwrap":false,"optionalDependencies":{"@ruvector/rvf-node-darwin-x64":"0.1.4","@ruvector/rvf-node-darwin-arm64":"0.1.4","@ruvector/rvf-node-linux-x64-gnu":"0.1.4","@ruvector/rvf-node-win32-x64-msvc":"0.1.4","@ruvector/rvf-node-linux-arm64-gnu":"0.1.4"},"_npmOperationalInternal":{"tmp":"tmp/rvf-node_0.1.6_1771283030552_0.6397237572368222","host":"s3://npm-registry-packages-npm-production"}},"0.1.7":{"name":"@ruvector/rvf-node","version":"0.1.7","description":"RuVector Format Node.js native bindings","main":"index.js","types":"index.d.ts","napi":{"binaryName":"rvf-node","targets":["x86_64-unknown-linux-gnu","x86_64-apple-darwin","aarch64-apple-darwin","x86_64-pc-windows-msvc","aarch64-unknown-linux-gnu"]},"scripts":{"build":"napi build --platform --release"},"license":"MIT","repository":{"type":"git","url":"git+https://github.com/ruvnet/ruvector.git"},"engines":{"node":">= 16"},"publishConfig":{"registry":"https://registry.npmjs.org/","access":"public"},"optionalDependencies":{"@ruvector/rvf-node-linux-x64-gnu":"0.1.7","@ruvector/rvf-node-darwin-x64":"0.1.7","@ruvector/rvf-node-darwin-arm64":"0.1.7","@ruvector/rvf-node-win32-x64-msvc":"0.1.7","@ruvector/rvf-node-linux-arm64-gnu":"0.1.7"},"_id":"@ruvector/rvf-node@0.1.7","gitHead":"d0ab6683f47207e53857f583e62244b4abaf01bc","bugs":{"url":"https://github.com/ruvnet/ruvector/issues"},"homepage":"https://github.com/ruvnet/ruvector#readme","_nodeVersion":"22.21.1","_npmVersion":"9.8.1","dist":{"integrity":"sha512-VHfEKBew62gNpi3lST0bxMw+ynRTM1xDdqca2d5A1qyW6jSCyTFJ9TAYP00uzfnTKKxezNcrzEkyQWj+gs/Pzw==","shasum":"e50be6d94830fe814f09814752b4645a2519331c","tarball":"https://registry.npmjs.org/@ruvector/rvf-node/-/rvf-node-0.1.7.tgz","fileCount":9,"unpackedSize":5458854,"signatures":[{"keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U","sig":"MEQCIHEnwpk8jfLzpU/gdArqT4wsm8jJpHr5wqOJUnxg9IBLAiA/jl4gBSnbNUFOOUrGxr1PDXzs6STqP558W6Ur+XgssQ=="}]},"_npmUser":{"name":"ruvnet","email":"ruv@ruv.net"},"directories":{},"maintainers":[{"name":"ruvnet","email":"ruv@ruv.net"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages-npm-production","tmp":"tmp/rvf-node_0.1.7_1771292976111_0.10227112534338989"},"_hasShrinkwrap":false}},"time":{"created":"2026-02-14T16:37:34.274Z","modified":"2026-02-17T01:49:36.512Z","0.1.0":"2026-02-14T16:37:34.517Z","0.1.1":"2026-02-15T00:09:26.141Z","0.1.2":"2026-02-15T06:30:06.607Z","0.1.3":"2026-02-16T14:34:03.155Z","0.1.4":"2026-02-16T20:25:44.598Z","0.1.5":"2026-02-16T21:43:24.536Z","0.1.6":"2026-02-16T23:03:50.795Z","0.1.7":"2026-02-17T01:49:36.371Z"},"bugs":{"url":"https://github.com/ruvnet/ruvector/issues"},"license":"MIT","homepage":"https://github.com/ruvnet/ruvector#readme","repository":{"type":"git","url":"git+https://github.com/ruvnet/ruvector.git"},"description":"RuVector Format Node.js native bindings","maintainers":[{"name":"ruvnet","email":"ruv@ruv.net"}],"readme":"# @ruvector/rvf-node\n\nNative Node.js bindings for the [RuVector Format](https://github.com/ruvnet/ruvector/tree/main/crates/rvf) (RVF) vector database. Built with Rust via N-API for native speed with zero serialization overhead.\n\n## Install\n\n```bash\nnpm install @ruvector/rvf-node\n```\n\n## Features\n\n- **Native Rust performance** via N-API (napi-rs), no FFI marshaling\n- **Single-file vector database** — crash-safe, no WAL, append-only\n- **k-NN search** with HNSW progressive indexing (recall 0.70 → 0.95)\n- **Metadata filtering** — Eq, Ne, Lt, Gt, Range, In, And, Or, Not\n- **Lineage tracking** — DNA-style parent/child derivation chains\n- **Kernel & eBPF embedding** — embed compute alongside vector data\n- **Segment inspection** — enumerate all segments in the file\n- **Cross-platform** — Linux (x86_64, aarch64), macOS (x86_64, Apple Silicon), Windows (x86_64)\n- **AGI methods** — HNSW index stats, witness chain verification, state freeze, metric introspection\n\n## AGI Methods\n\nFour introspection and integrity methods for advanced use cases.\n\n### `db.indexStats()` → `RvfIndexStats`\n\nReturns HNSW index statistics.\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `indexedVectors` | `number` | Number of indexed vectors |\n| `layers` | `number` | Number of HNSW layers |\n| `m` | `number` | M parameter (max edges per node per layer) |\n| `efConstruction` | `number` | ef_construction parameter |\n| `needsRebuild` | `boolean` | Whether index needs rebuilding (dead_space_ratio > 0.3) |\n\n### `db.verifyWitness()` → `RvfWitnessResult`\n\nVerifies SHAKE-256 witness chain integrity.\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `valid` | `boolean` | Whether the chain is valid |\n| `entries` | `number` | Number of entries in the chain |\n| `error` | `string?` | Error message if invalid |\n\n### `db.freeze()` → `number`\n\nSnapshot-freeze current state. Returns the epoch number.\n\n### `db.metric()` → `string`\n\nReturns the distance metric name (`\"l2\"`, `\"cosine\"`, or `\"inner_product\"`).\n\n### Usage Example\n\n```javascript\nconst stats = db.indexStats();\nconsole.log(`Indexed: ${stats.indexedVectors}, HNSW layers: ${stats.layers}`);\n\nconst witness = db.verifyWitness();\nconsole.log(`Witness chain: ${witness.entries} entries, valid: ${witness.valid}`);\n\nconsole.log(`Distance metric: ${db.metric()}`);\n\nconst epoch = db.freeze();\nconsole.log(`State frozen at epoch ${epoch}`);\n```\n\n## Quick Start\n\n```javascript\nconst { RvfDatabase } = require('@ruvector/rvf-node');\n\n// Create a store\nconst db = RvfDatabase.create('vectors.rvf', {\n  dimension: 384,\n  metric: 'cosine',\n});\n\n// Insert vectors\nconst vectors = new Float32Array(384 * 2); // 2 vectors, 384 dims each\nvectors.fill(0.1);\ndb.ingestBatch(vectors, [1, 2]);\n\n// Query nearest neighbors\nconst query = new Float32Array(384);\nquery.fill(0.15);\nconst results = db.query(query, 5);\n// [{ id: 1, distance: 0.002 }, { id: 2, distance: 0.002 }]\n\ndb.close();\n```\n\n## API Reference\n\n### Store Lifecycle\n\n```typescript\n// Create a new store\nconst db = RvfDatabase.create(path: string, options: RvfOptions);\n\n// Open existing store (read-write, acquires writer lock)\nconst db = RvfDatabase.open(path: string);\n\n// Open read-only (no lock, concurrent readers allowed)\nconst db = RvfDatabase.openReadonly(path: string);\n\n// Close and flush\ndb.close();\n```\n\n**RvfOptions:**\n\n| Field | Type | Default | Description |\n|-------|------|---------|-------------|\n| `dimension` | `number` | required | Vector dimensionality |\n| `metric` | `string` | `\"l2\"` | `\"l2\"`, `\"cosine\"`, or `\"inner_product\"` |\n| `profile` | `number` | `0` | Hardware profile: 0=Generic, 1=Core, 2=Hot, 3=Full |\n| `signing` | `boolean` | `false` | Enable segment signing |\n| `m` | `number` | `16` | HNSW M parameter (neighbor count) |\n| `efConstruction` | `number` | `200` | HNSW index build quality |\n\n### Ingest Vectors\n\n```typescript\nconst result = db.ingestBatch(\n  vectors: Float32Array,  // flat array of n * dimension floats\n  ids: number[],          // vector IDs\n  metadata?: RvfMetadataEntry[]  // optional metadata per vector\n);\n// Returns: { accepted: number, rejected: number, epoch: number }\n```\n\n**Metadata entry format:**\n\n```typescript\n{ fieldId: 0, valueType: 'string', value: 'category_a' }\n{ fieldId: 1, valueType: 'f64',    value: '0.95' }\n{ fieldId: 2, valueType: 'u64',    value: '42' }\n```\n\n### Query\n\n```typescript\nconst results = db.query(\n  vector: Float32Array,      // query vector\n  k: number,                 // number of neighbors\n  options?: RvfQueryOptions   // optional search parameters\n);\n// Returns: [{ id: number, distance: number }, ...]\n```\n\n**RvfQueryOptions:**\n\n| Field | Type | Default | Description |\n|-------|------|---------|-------------|\n| `efSearch` | `number` | `100` | HNSW search quality (higher = better recall, slower) |\n| `filter` | `string` | — | Filter expression as JSON string |\n| `timeoutMs` | `number` | `0` | Query timeout in ms (0 = no timeout) |\n\n### Filter Expressions\n\nFilters are passed as JSON strings. All leaf filters require `fieldId`, `valueType`, and `value`:\n\n```javascript\n// Equality\ndb.query(vec, 10, {\n  filter: '{\"op\":\"eq\",\"fieldId\":0,\"valueType\":\"string\",\"value\":\"science\"}'\n});\n\n// Range\ndb.query(vec, 10, {\n  filter: '{\"op\":\"range\",\"fieldId\":1,\"valueType\":\"f64\",\"low\":\"0.5\",\"high\":\"1.0\"}'\n});\n\n// In-set\ndb.query(vec, 10, {\n  filter: '{\"op\":\"in\",\"fieldId\":0,\"valueType\":\"u64\",\"values\":[\"1\",\"2\",\"5\"]}'\n});\n\n// Boolean combinations\ndb.query(vec, 10, {\n  filter: JSON.stringify({\n    op: 'and',\n    children: [\n      { op: 'eq', fieldId: 0, valueType: 'string', value: 'science' },\n      { op: 'gt', fieldId: 1, valueType: 'f64', value: '0.8' }\n    ]\n  })\n});\n\n// Negation\ndb.query(vec, 10, {\n  filter: '{\"op\":\"not\",\"child\":{\"op\":\"eq\",\"fieldId\":0,\"valueType\":\"string\",\"value\":\"spam\"}}'\n});\n```\n\n**Supported operators:** `eq`, `ne`, `lt`, `le`, `gt`, `ge`, `in`, `range`, `and`, `or`, `not`\n\n**Supported value types:** `u64`, `i64`, `f64`, `string`, `bool`\n\n### Delete\n\n```typescript\n// Delete by ID\nconst result = db.delete([1, 2, 3]);\n// Returns: { deleted: number, epoch: number }\n\n// Delete by filter\nconst result = db.deleteByFilter(\n  '{\"op\":\"gt\",\"fieldId\":1,\"valueType\":\"f64\",\"value\":\"0.9\"}'\n);\n```\n\n### Compact\n\nReclaims space from deleted vectors:\n\n```typescript\nconst result = db.compact();\n// Returns: { segmentsCompacted: number, bytesReclaimed: number, epoch: number }\n```\n\n### Status\n\n```typescript\nconst status = db.status();\n// {\n//   totalVectors: number,\n//   totalSegments: number,\n//   fileSize: number,\n//   currentEpoch: number,\n//   profileId: number,\n//   compactionState: 'idle' | 'running' | 'emergency',\n//   deadSpaceRatio: number,\n//   readOnly: boolean\n// }\n```\n\n### Lineage & Derivation\n\nRVF tracks parent/child relationships with cryptographic hashes:\n\n```typescript\ndb.fileId();        // hex string — unique file identifier\ndb.parentId();      // hex string — parent's ID (zeros if root)\ndb.lineageDepth();  // 0 for root files\n\n// Derive a child store (inherits dimensions and options)\nconst child = db.derive('/tmp/child.rvf');\nchild.lineageDepth(); // 1\nchild.parentId();     // matches parent's fileId()\n```\n\n### Kernel & eBPF Embedding\n\nEmbed compute segments alongside vector data:\n\n```typescript\n// Embed a Linux microkernel\ndb.embedKernel(\n  1,                           // arch: 0=x86_64, 1=aarch64\n  0,                           // kernel type\n  0,                           // flags\n  Buffer.from(kernelImage),    // kernel binary\n  8080,                        // API port\n  'console=ttyS0 quiet'       // kernel cmdline (optional)\n);\n\n// Extract kernel\nconst kernel = db.extractKernel();\nif (kernel) {\n  console.log(kernel.header);  // Buffer: 128-byte KernelHeader\n  console.log(kernel.image);   // Buffer: kernel image bytes\n}\n\n// Embed an eBPF XDP program\ndb.embedEbpf(\n  1,                          // program type (XDP distance)\n  2,                          // attach type (XDP ingress)\n  384,                        // max vector dimension\n  Buffer.from(bytecode),      // BPF ELF object\n  Buffer.from(btf)            // optional BTF section\n);\n\n// Extract eBPF\nconst ebpf = db.extractEbpf();\nif (ebpf) {\n  console.log(ebpf.header);   // Buffer: 64-byte EbpfHeader\n  console.log(ebpf.payload);  // Buffer: bytecode + BTF\n}\n```\n\n### Segment Inspection\n\n```typescript\nconst segments = db.segments();\n// [{ id: 1, offset: 0, payloadLength: 4096, segType: 'manifest' },\n//  { id: 2, offset: 4160, payloadLength: 51200, segType: 'vec' },\n//  { id: 3, offset: 55424, payloadLength: 12288, segType: 'index' }]\n\ndb.dimension(); // 384\n```\n\n## Self-Booting RVF\n\nAn `.rvf` file can embed a Linux kernel, eBPF programs, and SSH keys alongside vector data — producing a single file that boots as a microservice.\n\nThe Claude Code Appliance example builds a complete AI dev environment:\n\n```bash\ncd examples/rvf\ncargo run --example claude_code_appliance\n```\n\n```\nclaude_code_appliance.rvf\n  ├── KERNEL_SEG    Linux 6.8.12 bzImage (5.2 MB, x86_64)\n  ├── EBPF_SEG      Socket filter — ports 2222, 8080 only\n  ├── VEC_SEG       20 package embeddings (128-dim)\n  ├── INDEX_SEG     HNSW graph for package search\n  ├── WITNESS_SEG   6-entry tamper-evident audit trail\n  └── CRYPTO_SEG    3 Ed25519 SSH user keys\n```\n\nFinal file: **5.1 MB single `.rvf`** — boots Linux, serves queries, runs Claude Code.\n\nSee the [full RVF documentation](https://github.com/ruvnet/ruvector/tree/main/crates/rvf) for details.\n\n## Build from Source\n\n```bash\n# Prerequisites: Rust 1.87+, Node.js 18+\ncd crates/rvf/rvf-node\nnpm install\nnpm run build\n```\n\n## Related Packages\n\n| Package | Description |\n|---------|-------------|\n| [`@ruvector/rvf`](https://www.npmjs.com/package/@ruvector/rvf) | Unified TypeScript SDK |\n| [`@ruvector/rvf-wasm`](https://www.npmjs.com/package/@ruvector/rvf-wasm) | Browser WASM package |\n| [`@ruvector/rvf-mcp-server`](https://www.npmjs.com/package/@ruvector/rvf-mcp-server) | MCP server for AI agents |\n| [`rvf-runtime`](https://crates.io/crates/rvf-runtime) | Rust runtime (powers this package) |\n\n## License\n\nMIT OR Apache-2.0\n","readmeFilename":"README.md"}